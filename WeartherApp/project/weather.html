<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Weather App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="searchbar">
        <div class="searchbarinput">
           <input class="inputfield" type="text" placeholder="Search city">
           <img src="C:\Users\palag\OneDrive\Desktop\project\searchbar.png" alt="" width="45px" class="searchicon"onclick=fetchData()>
             </div>
        </div>
        <br>
        <div class="main-content">
          <div class="leftdiv">
            <div class="cityname">
             <h4 id="cityname" >CityName</h4>
             <h1 id="temp">0 &deg;C</h1>
             <h4 id="skydescription">Sky Description</h4>
             <hr class="line">
             <div class="citybelow">
                <div class="flex-d">
                   <img src="C:\Users\palag\Downloads\icons8-calender-64.png "width="30px">   
                   <h4 id="date">Calender</h4>  
                </div>
                <div class="flex-d" >
                <img src="C:\Users\palag\Downloads\icons8-time-span-50.png" width="30px">
                <h4 id="time">Time</h4>     
                </div>
             </div>
             
            </div>
            <div class="dates ">
                <div class="fivedays">
                  <h4>Coming five days</h4>
                </div>
                
                <div id="forecastContainer" class="forcastrow">
                    <div class="sevendays">
                       <img src="C:\Users\palag\Downloads\icons8-clouds-24.png" width="40">
                    <h4>7 &deg;C</h4>
                    <h4>Saturday</h4>
                    <h4>08-03-2025</h4>
                    </div>
                    <div class="sevendays">
                       <img src="C:\Users\palag\Downloads\icons8-clouds-24.png" width="40">
                    <h4>7 &deg;C</h4>
                    <h4>Saturday</h4>
                    <h4>08-03-2025</h4>
                    </div>
                    <div class="sevendays">
                       <img src="C:\Users\palag\Downloads\icons8-clouds-24.png" width="40">
                    <h4>7 &deg;C</h4>
                    <h4>Saturday</h4>
                    <h4>08-03-2025</h4>
                    </div>
                    <div class="sevendays">
                       <img src="C:\Users\palag\Downloads\icons8-clouds-24.png" width="40">
                    <h4>7 &deg;C</h4>
                    <h4>Saturday</h4>
                    <h4>08-03-2025</h4>
                    </div>
                    
                   
                    
                    
                </div>


            </div>
            

        </div>
        <div class="rightdiv">
            <div class="firstrightdiv">
                <div class="box">
                    <img src="C:\Users\palag\Downloads\icons8-steady-pressure-24.png" width="35px">
                    <h4>Humidity</h4>
                    <h4 id="humidity">Metric Value</h4>
                </div>
                <div class="box">
                    <img src="C:\Users\palag\Downloads\icons8-steady-pressure-24.png" width="35px">
                    <h4>Pressure</h4>
                    <h4 id="pressure">Metric Value</h4>
                </div>
                <div class="box">
                    <img src="C:\Users\palag\Downloads\icons8-steady-pressure-24.png" width="35px">
                    <h4>feelsLike</h4>
                    <h4 id="feelsLike">Metric Value</h4>
                </div>
                <div class="box">
                    <br>
                    <img src="C:\Users\palag\Downloads\icons8-steady-pressure-24.png" width="35px"><br>
                    <h4>Visibility</h4>
                    <h4 id="visibility">Metric Value</h4>
                </div>

            </div>
            
            <br>
             <div class="secondrightdiv">
                
                   <div class="box1 gap=2">
                   
                  <h4>Air Quality Metric</h4>  
                
              
                <div class="box2">
                    <img src="C:\Users\palag\Downloads\icons8-air-48.png" width="35">
                    <div class="box5">
                       <h4>AQI metric</h4>
                     <h4 id="no2Value">0</h4>
                    <h4>AQI Metric </h4>
                    <h4 id="o3Value">0</h4>
                    <h4>AQI Metric </h4>
                    <h4 id="coValue">0</h4>
                    <h4>AQI Metric </h4>
                    <h4 id="so2Value">0</h4>

                    </div>
                </div>
                    
                   
                   </div>
                  <div class="box1">
  <div class="box3">
    <h4>Sunrise & Sunset</h4>
    <div class="image-row">
      <div class="image-item">
        <img src="C:\Users\palag\Downloads\icons8-sun-50.png" alt="Sunrise" width="90">
      <h4 id="sunrise">  Sunrise 6:00 AM</h4>
      </div>
      <div class="image-item">
        <img src="C:\Users\palag\Downloads\icons8-new-moon-50.png" alt="Sunset" width="90">
        <h4 id="sunset">Sunset 7:00 PM</h4>
      </div>
    </div>
  </div>
</div>
  </div>
             <div class="thirdrightdiv">
              <div  id="weather"class="box4">
                <h4>9 Am</h4>
                <img src="c:\Users\palag\Downloads\icons8-clouds-24.png" width="35px">
                <h4>5&deg;C</h4>
              </div>
              <div class="box4">
                <h4>12 Pm</h4>
                <img src="C:\Users\palag\Downloads\icons8-rain-cloud-50.png"width="35px">
                 <h4>25&deg;C</h4>
              </div>
              <div class="box4">
                <h4>15 Pm</h4>
                <img src="C:\Users\palag\Downloads\icons8-sun-50.png"width="35px">
                 <h4>5&deg;C</h4>
              </div>
              <div class="box4">
                <h4>18 Pm</h4>
                <img src="c:\Users\palag\Downloads\icons8-clouds-24.png"width="35px">
                 <h4>5&deg;C</h4>
              </div>
              <div class="box4">
                <h4>21 Pm</h4>
                <img src="c:\Users\palag\Downloads\icons8-clouds-24.png"width="35px">
                 <h4>5&deg;C</h4>
              </div>

             </div>

            
      
        
        
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<script>
  function dateFormat(timestamp) {
            const date = new Date(timestamp * 1000); // Multiply by 1000 to convert from seconds to milliseconds
            return date.toLocaleString();// Convert to local time format and return it
        }
        async function fetchAQIData(lat, lon) {
            let fetchAQIData = await fetch(`http://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=d28274b5fe592e1f1e558103a5e66370`)
            let formattedData = await fetchAQIData.json();
            console.log('AQI Data: ', formattedData);
            let list = formattedData.list[0].components;
            console.log("Line 242: ", list);

            $("#no2Value")[0].innerText = list.no2

            $("#o3Value")[0].innerText = list.o3

            $("#coValue")[0].innerText = list.co

            $("#so2Value")[0].innerText = list.so2

        }
  async function fetchData() {
    alert("fetching data successfully....")

            let cityName = document.getElementsByClassName('inputfield')[0].value;
            let requestData = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=d28274b5fe592e1f1e558103a5e66370&units=metric`)
            let formattedData = await requestData.json();
            console.log("Formatted Data: ", formattedData);

            let responseCityName = formattedData.name
            let responseTemp = formattedData.main.temp
            let skyDescription = formattedData.weather[0].description

            $('#cityname')[0].innerText = responseCityName;
            $("#temp")[0].innerText = responseTemp;
            $("#skydescription")[0].innerText = skyDescription;
            
            //update date and time
             let properDate = dateFormat(formattedData.dt);
            let date = properDate.split(',')[0]
            let time = properDate.split(',')[1]
            $("#date")[0].innerText = date;
            $("#time")[0].innerText = time
             //updating sunrise and sunset
            let sunriseTimeStamp = formattedData.sys.sunrise;
            let sunsetTimeStamp = formattedData.sys.sunset;
            let properSunriseTime = dateFormat(sunriseTimeStamp).split(',')[1]
            let properSunsetTime = dateFormat(sunsetTimeStamp).split(',')[1];


            $("#sunrise")[0].innerText = properSunriseTime
            $("#sunset")[0].innerText = properSunsetTime
            //updating humidity,pressure,feelsLike,visibility
             $("#humidity")[0].innerText=formattedData.main.humidity
             $("#pressure")[0].innerText=formattedData.main.pressure
            $("#feelsLike")[0].innerText=formattedData.main.feels_like
            $("#visibility")[0].innerText=formattedData.visibility




             let lat = formattedData.coord.lat;
            let lon = formattedData.coord.lon;
            
            fetchAQIData(lat, lon);
          }

  
</script>
</body>
</html>